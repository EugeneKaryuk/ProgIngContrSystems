# Менеджер каталогів магазинів

https://docs.appsmith.com/learning-and-resources/tutorials/building-a-store-catalog-manager

У цьому посібнику показано, як за допомогою [Appsmith](https://app.appsmith.com/) створити повнофункціональну програму **Каталог продуктів** для онлайн-магазину продуктів під назвою Oakry. Програма, яку ми будемо створювати, — це багатосторінкова інформаційна панель, яка використовується менеджерами каталогів Oakry для:

- Перегляду каталогу продукції
- Додавання нових товарів в каталог
- Оновлення інформації про товари в каталозі

Посібник складається з трьох частин, і ми рекомендуємо вам дотримуватися їх по порядку.

Ви повинні мати обліковий запис у [Appsmith Cloud](https://app.appsmith.com/user/signup) (це безкоштовно) або у власному [приватному екземплярі](https://docs.appsmith.com/getting- запущено/налаштування), перш ніж почати. Перш ніж зануритися, давайте трохи поговоримо про середовище Appsmith.

## Середовище Appsmith

Якщо ви вперше використовуєте Appsmith, вам потрібно буде ознайомитися з деякими початковими налаштуваннями. Коли ви ввійдете, ви будете перенаправлені на [панель Appsmith Dashboard](https://app.appsmith.com/applications). Ця домашня сторінка містить автоматично створений робочий простір під назвою **`<Your first-name>'s apps`** (відтепер іменуватиметься вашим особистим робочим простором), що складається з кількох шаблонів. У цьому підручнику ми створимо нашу програму Catalog у тій же робочій області.

Давайте створимо нову програму під назвою *Catalog Dashboard* в персональній робочій області.

Додаток на Appsmith — це окрема програмна програма, яка вирішує певний випадок використання. Він може складатися з однієї або кількох веб-сторінок.

Нижче наведено кроки для створення програми з панелі інструментів Appsmith:

1. Натисніть кнопку «+New»_ в області біля назви вашої робочої області на інформаційній панелі.
2. Ви будете перенаправлені на сторінку конфігурації новоствореної програми, яка за умовчанням матиме назву **Untitled Application 1**.
3. Перейменуйте свою програму на **Catalog Dashboard**, клацнувши наявну назву у верхньому лівому куті екрана та вибравши **Edit Name**.
4. Натисніть кнопку **Build with drag & drop**, розташовану в центрі полотна.

<iframe style="width: 100%; height: auto; aspect-ratio: 16 / 9; border-radius: 0.5rem; overflow: hidden;" src="https://youtube.com/embed/TaPgZbHpkQw?autoplay=1" srcdoc="<style>*{padding:0;margin:0;overflow:hidden}html,body{height:100%}img,span{position:absolute;width:100%;top:0;bottom:0;margin:auto}span{height:100px;text-align:center;font:48px/1.5 sans-serif;color:white;text-shadow:0 0 0.25em gray}</style><a href=https://youtube.com/embed/TaPgZbHpkQw?autoplay=1><img src=https://img.youtube.com/vi/TaPgZbHpkQw/maxresdefault.jpg alt='Creating and renaming a brand new application'><span><svg width=&quot;100px&quot; height=&quot;100px&quot; viewBox=&quot;0 0 463 462&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;><circle opacity=&quot;0.5&quot; cx=&quot;231.742&quot; cy=&quot;230.999&quot; r=&quot;231&quot; fill=&quot;#FE5011&quot;></circle><path d=&quot;M181.703 165.53C181.703 156.392 191.812 150.873 199.499 155.814L301.34 221.283C308.412 225.83 308.412 236.168 301.34 240.715L199.499 306.184C191.812 311.125 181.703 305.606 181.703 296.468V165.53Z&quot; fill=&quot;#FFFFFF&quot;></path></svg></span></a>" allowfullscreen="" title="Creating and renaming a brand new application" loading="lazy" allow="autoplay; picture-in-picture" frameborder="0"></iframe>

*Створення та перейменування абсолютно нової програми*

Нова програма постачається з автоматично створеними каталогами, які створюють програму Appsmith. Ось подивіться на структуру каталогу:

![img](https://docs.appsmith.com/assets/images/as_storeTutorial_dirs-a5f8b0e9a67e2a82907f55fc7367d24d.png)

Панель Entity Explorer у лівій частині екрана – це місце, де можна створювати та впорядковувати віджети інтерфейсу користувача та джерела даних. Крім того, у цих розділах можна знайти різні інтеграції, якими можна скористатися.

Давайте подивимося, що являє собою кожен із цих каталогів:

- `Pages`

   : цей каталог є контейнером для всіх веб-сторінок і їх конфігурації вашої програми. У цьому каталозі ви можете створювати та впорядковувати різні сторінки на основі інструменту чи програми, які ви створюєте.

   - Каталог **`Page1`** містить усі сутності, необхідні для візуалізації відповідної веб-сторінки.

- **`Widgets`**: цей каталог є контейнером для всіх віджетів, які будуть частиною веб-сторінки `Page1`. Ви можете розглядати віджети як прості компоненти інтерфейсу користувача для вашої веб-сторінки, такі як форма або таблиця. За замовчуванням цей каталог не містить попередньо налаштованих віджетів.

- **`Datasources`**: каталог джерел даних – це контейнер, що складається з усіх API та запитів, до яких підключається Page1.

- Нарешті, ви також можете переглянути всі [JS libraries supported by Appsmith](https://docs.appsmith.com/core-concepts/writing-code/ext-libraries) у розділі ***External libraries*** . Ці бібліотеки вже імпортовано в середовище вашої програми, готові до використання.

## Створення першої сторінки

Тепер, коли ваше середовище (називається **застосунком (app)**) налаштовано, ви готові почати роботу.

Сторінка в Appsmith — це місце, де об’єднуються три будівельні блоки вашої програми — віджети, API та запити до БД, щоб створити представлення.

На першій сторінці, яку ви створите, буде перелічено всі продукти в Oakry. Давайте використаємо сторінку за замовчуванням **Page1**, яка була створена під час створення цієї програми. Тепер перейменуйте сторінку на **ProductListPage**, двічі клацнувши на **Page1**.

У наступному розділі давайте створимо простий інтерфейс користувача для нашого менеджера магазину.

# Створення простого інтерфейсу користувача

У цьому розділі ви розповіте про створення простої веб-сторінки, яка відображає продукти, отримані з бази даних, у таблиці для магазину **Oakry**.

До кінця частини 1 ви будете знайомі з:

- Створення віджетів на Appsmith.
- Підключення баз даних і написання запитів SQL в Appsmith.
- Налаштування віджетів для відтворення результатів ваших запитів.

## Додавання вашого першого віджета

Як обговорювалося в попередніх розділах, віджети — це прості компоненти інтерфейсу користувача, які можна додавати до наших програм. Тепер давайте додамо віджет таблиці під **`ProductListPage`**, виконавши наведені нижче дії:

1. Перейдіть до **Widgets** у розділі `ProductListPage`
2. Натисніть на `+`
3. Знайдіть віджет `Table`
4. Перетягніть його на полотно праворуч

Це створить нову таблицю на `ProductListPage`.

<iframe style="width: 100%; height: auto; aspect-ratio: 16 / 9; border-radius: 0.5rem; overflow: hidden;" src="https://youtube.com/embed/O46_oPfurTc?autoplay=1" srcdoc="<style>*{padding:0;margin:0;overflow:hidden}html,body{height:100%}img,span{position:absolute;width:100%;top:0;bottom:0;margin:auto}span{height:100px;text-align:center;font:48px/1.5 sans-serif;color:white;text-shadow:0 0 0.25em gray}</style><a href=https://youtube.com/embed/O46_oPfurTc?autoplay=1><img src=https://img.youtube.com/vi/O46_oPfurTc/maxresdefault.jpg alt='Drag-and-dropping your first widget onto the canvas'><span><svg width=&quot;100px&quot; height=&quot;100px&quot; viewBox=&quot;0 0 463 462&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;><circle opacity=&quot;0.5&quot; cx=&quot;231.742&quot; cy=&quot;230.999&quot; r=&quot;231&quot; fill=&quot;#FE5011&quot;></circle><path d=&quot;M181.703 165.53C181.703 156.392 191.812 150.873 199.499 155.814L301.34 221.283C308.412 225.83 308.412 236.168 301.34 240.715L199.499 306.184C191.812 311.125 181.703 305.606 181.703 296.468V165.53Z&quot; fill=&quot;#FFFFFF&quot;></path></svg></span></a>" allowfullscreen="" title="Drag-and-dropping your first widget onto the canvas" loading="lazy" allow="autoplay; picture-in-picture" frameborder="0"></iframe>

*Перетягніть свій перший віджет на полотно*

Давайте обговоримо, що сталося зараз:

- Щойно ви додасте новий віджет `Table`, ви побачите деякі попередньо заповнені дані.
- Плаваюче вікно під назвою **`Table1`** відкривається праворуч від таблиці. Це панель властивостей віджета; тут ви можете налаштувати властивості віджета.
- Властивість `Table Data` на панелі визначає, які дані відображатимуться в таблиці. Ви можете прочитати більше про властивості віджета таблиці [тут](https://docs.appsmith.com/reference/widgets/table).
- За замовчуванням ім’я таблиці встановлено на **Table1**. Його можна перейменувати як завгодно, просто двічі клацнувши його. Давайте тепер змінимо його на **`ProductsTable`**.

### Understanding the Table Widget

Let's now take a minute to check how the array in `Table Data` maps to the table's columns and their values.

Here are steps to play with **Table Data** to get a hang of how it affects the data displayed in the table:

1. First, go to the **Table Data** property of **`ProductsTable`**.
2. Copy-paste the below JSON data.
3. The above step will update the existing pre-populated data. You'll see the updated table.
4. You can always change the values, to test it quickly, go to the first object of the array and update the value of the key `one` from `1` to `i`.
5. Verify that column **one** of the first row of the table now shows `i`.

### Розуміння віджета таблиці

Давайте приділимо хвилинку, щоб перевірити, як масив у `Table Data` зіставляється зі стовпцями таблиці та їхніми значеннями.

Ось кроки, як пограти з **Table Data**, щоб зрозуміти, як вони впливають на дані, що відображаються в таблиці:

1. Спочатку перейдіть до властивості **Table Data** таблиці **`ProductsTable`**.
2. Скопіюйте та вставте наведені нижче дані JSON.
3. Наведений вище крок оновить наявні попередньо заповнені дані. Ви побачите оновлену таблицю.
4. Ви завжди можете змінити значення, щоб швидко перевірити, перейдіть до першого об’єкта масиву та оновіть значення ключа `one` з `1` на `i`.
5. Переконайтеся, що стовпець **one** першого рядка таблиці тепер показує `i`.

```javascript
[
  { "one": "1", "two": "2" },
  { "one": "I", "two": "II" }
]
```

Ви повинні побачити значення вашої таблиці, як на знімку екрана нижче:

![img](https://docs.appsmith.com/assets/images/as_storeTutorial_testTable-3d4bd3bc36883ba9a10a8601203c7959.png)

Повернемося до поля `Table Data`. Якщо ви помістите курсор у поле «Table Data », ви побачите плаваюче вікно, що складається з двох властивостей:

1. `Expected Structure`: це поле визначає тип даних, очікуваний полем властивості. Для віджета таблиці **Expected Structure** – це `Array<Object>`. Це означає, що значеннями можна встановити будь-що, що є об’єктом Table або оцінює його.
2. `Evaluated Value`: це поле показує в реальному часі, що оцінюється введенням у поле. Це стане в нагоді, коли ви пишете код JavaScript у полі та хочете перевірити, чи він обчислюється належним чином.

Наразі ви успішно відобразили статичні дані у своїй таблиці. У наступному розділі ми відобразимо дані продукту з макетної бази даних для програми **Oakry**.

Однак, коли ви створюєте програму для іншого варіанту використання, ви можете підключитися до власної [бази даних](https://docs.appsmith.com/core-concepts/connecting-to-data-sources).

## Написання вашого першого запиту

Тепер давайте використаємо макет бази даних, щоб відобразити всі елементи каталогу для програми **Oakry**, виконавши наведені нижче кроки:

1. Спочатку давайте створимо нове **Datasource**, клацнувши піктограму **"+"** поруч із каталогом **Datasource**.
2. Виберіть `Create New`, виберіть Postgres як тип бази даних і назвіть її "Mock Database".
3. Заповніть наступні дані та натисніть кнопку **Save**.

```text
Host: fake-api.cvuydmurdlas.us-east-1.rds.amazonaws.com
Port: 5432
User: fakeapi
Password: LimitedAccess123#
Database: fakeapi
```

1) Потім натисніть кнопку ***New Query***, і ви побачите створений запит із назвою **Query1**

2) Перейменуйте запит на **ProductsQuery**, двічі клацнувши наявну назву.

3) Потім натисніть опцію «Create» та вставте запит, показаний нижче, у вкладку **Query**:

```sql
SELECT "id", "productName", "category", "mrp" FROM products ORDER BY "id";
```

4) Натисніть кнопку **Run**, щоб виконати запит і роздрукувати всі результати у вікні відповіді внизу сторінки.

Запит зберігається відразу після створення, без необхідності його явного збереження. Це стосується всіх API, віджетів і будь-яких змін, які ви вносите в будь-який об’єкт у своїй програмі.

Нижче наведено знімок екрана того, як Appsmith відображає результати вашого запиту SQL.

![Your successful query results will appear in the bottom section of the screen under the Response tab.](https://docs.appsmith.com/assets/images/as_storeTutorial_dbRun-df0ce2bcef80d49123db093482fd90d7.png)

## Доступ до результатів запиту до віджета

Наступним кроком буде відображення результатів запиту в `ProductsTable`, виконайте наведені нижче дії, щоб зробити те саме:

1. Поверніться до *Widgets* у розділі `ProductListPage` і виберіть `ProductsTable`
2. Відкрийте властивості `Product_Table` і скопіюйте наступну властивість у `Table Data`

```javascript
{{ProductsQuery.data}}
```

> Якщо ви використовуєте синтаксис moustache `{{ }}`, Appsmith розпізнає вміст фігурних дужок як код JavaScript. Ви можете писати JavaScript будь-де в Appsmith за допомогою `{{ }}`.

Вище ми отримуємо доступ до нашого об’єкта запиту за його назвою, `ProductsQuery`; потім ми посилаємося на його властивість `.data`, щоб використовувати дані, які були повернуті запитом.

Встановлення для **Table Data** значення `{{ ProductsQuery.data }}` також гарантує, що під час кожного завантаження **ProductListPage**, запит **ProductsQuery** запускатиметься автоматично. Однак ви можете змінити цю поведінку за замовчуванням, перемикаючи поле «**Run query on page load**» на вкладці **Setting** у **ProductsQuery**.

Тепер ви повинні побачити, що ваша таблиця відображає результати `ProductsQuery`. На цьому етапі ви можете розгорнути свою програму та поділитися нею, щоб відобразити каталог продуктів Oakry!

Нижче наведено скріншот:

![You can access the response data of any query that has been run by referencing its data property.](https://docs.appsmith.com/assets/images/as_storeTutorial_productsQuery-e557c442db54ca436bb3c8e682936402.png)

## Змінні та імена

У попередньому розділі ми використовували імена для доступу до даних нашого запиту, посилаючись на властивість, `data`, в імені запиту. У цьому сенсі думайте про віджети, API та запити до БД в Appsmith так само, як про змінні в інших мовах програмування:

1. Вони представляють об'єкт; у нашому випадку це віджет, об’єкт API або об’єкт запиту.
2. Вони мають властивості та підтримують набір методів.
3. Вони мають сферу застосування; до них можна отримати доступ лише з батьківської сторінки.
4. Усі імена на сторінці мають бути унікальними.

Як ви побачите в наступному розділі, ми побачимо, що доступ до стану віджета також можна отримати з визначення запиту. Усі будівельні блоки сторінки Appsmith – віджети, запити до БД та API можуть отримувати доступ до даних та/або стану один одного за допомогою своїх імен.

# Використання форм

У першій частині цього посібника ви створили односторінкову програму для перегляду продуктів для **Oakry**. У цій частині ви розширите програму до багатосторінкової програми, де ви створюватимете нову сторінку, і дізнаєтеся, як:

- Створити форму для прийняття даних про новий продукт від користувача
- Додати перевірки до полів форми
- Доступитися до стану віджетів у запитах для вставки динамічного введення
- Прив’язати кнопку надсилання форми, щоб ініціювати додавання нового продукту

Ми також додамо кнопку на **ProductListPage**, яка спрямовує нас на нашу нову сторінку та відкриває цю форму. Давайте розпочнемо!

## Створення вашої першої форми

По-перше, щоб додати нові продукти до каталогу, вам потрібно буде створити новий [form widget](https://docs.appsmith.com/reference/widgets/form).  Щоб все було більш упорядковано, зробіть це на новій сторінці, щоб уникнути впливу на сторінку каталогу. Виконайте наведені нижче дії.

1. Створіть нову ***Page***, клацнувши піктограму «+» поруч із каталогом **Pages**.
2. Перейменуйте сторінку на **`NewProductPage`**
3. Знайдіть і додайте новий віджет **Form**, натиснувши піктограму «+» під каталогом віджетів на сторінці.
4. Перейменуйте форму на **`AddProductForm`**
5. Ваша нова форма автоматично матиме кілька компонентів віджетів: текстовий віджет, який виконує роль заголовка, і дві кнопки внизу.
    - Клацніть його текстовий віджет із написом "Form" та оновіть властивість **Text** на **`Add a Product (Oakry)`**.
    - Знайдіть внизу кнопку з міткою «Submit» та перейменуйте цей віджет на **`SubmitButton`**.

## Додавання віджетів введення до форми

Створена форма не має полів введення. Тепер додайте новий [input widget](https://docs.appsmith.com/reference/widgets/input) до порожньої форми (*AddProductForm*), просто вибравши його та опустивши на полотно. Перейменуйте віджет введення на **`ProductNameInput`**.

Виникли проблеми з перетягуванням віджета «Input » на віджет «Form »? Спробуйте перетягнути його швидше! Віджети автоматично регулюють свій розмір і положення, щоб звільнити місце для будь-яких нових віджетів, які ви перетягуєте на полотно. Але якщо ви швидко перетягнете їх, ви зможете розмістити речі всередині певних віджетів, таких як форма та контейнер. Щоб дізнатися більше про те, як це працює, перегляньте цю [демонстрацію](https://www.youtube.com/watch?v=NB8Btt0aw0g)!

Нижче наведено скріншот того, як має виглядати ваша форма:

![img](https://docs.appsmith.com/assets/images/as_storeTutorial_addForm-3207dc4bc6f43a58cead62045642354b.png)

Віджет введення починається з поля **Label**, але ми також можемо використовувати окремий [text widget](https://docs.appsmith.com/reference/widgets/text), щоб мати трохи більше контролю над його розміщенням . Давайте додамо текстовий віджет ліворуч від **ProductNameInput**. Потім відкрийте властивості нового текстового віджета та оновіть його властивість **Text** на **`Product Name`:**, щоб змінити відображуваний текст. Ви можете видалити мітку віджета Input , очистивши поле **Label** у його властивостях.

У той же час, давайте продовжимо і дамо **`AddProductForm`** правильний заголовок: знайдіть його текстовий віджет у верхній частині форми та встановіть його властивість **Text** на **`Add A Product: `**.

## Налаштування віджетів Input

Ви також можете налаштувати поля введення в Appsmith. Наприклад, ви можете встановити типи даних, заповнювачі, спеціальні повідомлення про помилки тощо. Тепер відкрийте властивості для `ProductNameInput` і встановіть наступне:

1. Для властивості **Data Type** має бути встановлено значення `Text`.
2. Зробіть введення обовязковим, перемкнувши перемикач **Required**.

Властивість типу даних встановлює дозволений тип даних для введення - у цьому випадку користувач може вказати лише текст. Однак, залежно від ваших випадків використання, ви можете змінити його на номер, пароль або електронну адресу. Перемикач **Required** робить поле обов’язковим.

Кнопка надсилання форми автоматично вимикається, якщо не введено обов’язкове поле. Щоб перевірити більше властивостей і конфігурацій, перегляньте документи [тут](https://docs.appsmith.com/reference/widgets/input#properties).

## Adding a Select Widget to the Form

Let's add another field to the **`AddProductForm`** that enables users to choose the product category. For this, you'll have to drag and drop a [Select widget](https://docs.appsmith.com/reference/widgets/select) and rename it to **`CategorySelect`**. Also, to keep the form clean, add a text widget to use as a label next to **`CategorySelect`**. Set the text widget's **Text** property to **`Category:`**.

As you look at the `CategorySelect` widget, you'll see some default options already added to it. Follow the steps below to set these options as necessary for our Oakry catalog:

1. Open **`CategorySelect`**'s properties window.
2. Click on the **Options** field. The value in this field is used to specify the options of the Select widget.
3. See that the **Expected Structure** is `Array<{ label: string, value: string }>`
4. Now update the options by copy-pasting the snippet below into the `Options` field.

## Додавання віджета Select до Form

Давайте додамо ще одне поле до **`AddProductForm`**, яке дозволить користувачам вибирати категорію продукту. Для цього вам потрібно буде перетягнути  [Select widget](https://docs.appsmith.com/reference/widgets/select) і перейменувати його на **`CategorySelect`**. Крім того, щоб зберегти форму чистою, додайте текстовий віджет для використання як мітки поруч із **`CategorySelect`**. Встановіть для властивості **Text** текстового віджета значення **`Category:`**.

Дивлячись на віджет `CategorySelect`, ви побачите, що до нього вже додано деякі стандартні параметри. Виконайте наведені нижче дії, щоб налаштувати ці параметри за необхідності для нашого каталогу Oakry:

1) Відкрийте вікно властивостей **`CategorySelect`**.

2) Натисніть на поле **Options**. Значення в цьому полі використовується для визначення параметрів віджета «Вибрати».

3) Переконайтеся, що **Expected Structure** – це `Array<{ label: string, value: string }>`

4) Тепер оновіть параметри, скопіювавши наведений нижче фрагмент у поле «Параметри».

```javascript
[
  {
    "label": "VEGETABLES",
    "value": "VEGETABLES"
  },
  {
    "label": "BAKERY",
    "value": "BAKERY"
  },
  {
    "label": "FRUITS",
    "value": "FRUITS"
  },
  {
    "label": "BEVERAGES",
    "value": "BEVERAGES"
  },
  {
    "label": "DAIRY",
    "value": "DAIRY"
  }
]
```

5) Нарешті, встановіть **Default Option** на `blank` та перемкніть поле **Required** на `true`.

## Написання вашої першої трансформації

Копіювати/вставляти та вручну редагувати налаштування в полі **Options** може стати громіздким! Замість цього, давайте використаємо іншу техніку, щоб зробити це простішим і зручнішим: перетворення JavaScript!

Відкрийте властивості `CategorySelect` і додайте наступний фрагмент у поле `Options`:

```javascript
{ {
    _.map(
      ["vegetables", "bakery", "fruits", "beverages", "dairy"],
      function (category) {
        return { label: category.toUpperCase(), value: category.toUpperCase() };
      }
    );
} }
```

> Щоб переконатися, що це працює, ви можете перевірити **Evaluated Value** та переконатися, що воно відповідає **Expected Structure**.

У наведеному вище фрагменті коду метод `_.map` з **lodash** і метод `toUpperCase()` з JavaScript для перетворення `Array<Strings>` на `Array<{ label: string, value: string }>`. [Click here](https://lodash.com/), щоб дізнатися більше про **lodash**, зовнішню бібліотеку JavaScript, яку можна використовувати в Appsmith.

За допомогою розширення ви можете перетворити будь-які дані в потрібний формат і тип. Наприклад, ваш вхідний масив може бути значеннями, повернутими запитом, який ви можете перетворити на `Array<{ label: string, value: string }>`.

Тепер наше поле **Options** легше читати, і його набагато легше оновлювати в майбутньому, якщо нам потрібно буде додати або видалити значення!

**Трансформація даних:**

Можливо, ви забажаєте визначити функцію JavaScript, яка змінює/перетворює форму чи зовнішній вигляд ваших даних перед тим, як їх відобразить віджет. Наприклад, ви можете включити методи перевірки відповідності вхідних записів певній умові та включити або відфільтрувати записи на основі результату.

Оскільки ви можете Appsmith майже всюди підтримувати JavaScript, ви можете використовувати JavaScript або одну з [підтримуваних бібліотек JS](https://docs.appsmith.com/core-concepts/writing-code/ext-libraries) для перетворення даних у будь-якому віджеті, API або запиті до БД.

## Заврешення форми

Поки що форма може приймати назву та категорію продукту. Тепер ми додамо поле для ціни. Перетягніть новий [input widget](https://docs.appsmith.com/reference/widgets/input) і перейменуйте його на `MrpInput`. Це матиме числове значення, тому змініть `Data Type` на `Number.` Використовуйте [label property](https://docs.appsmith.com/learning-and-resources/tutorials/building-a-store-catalog-manager/reference/widgets/input#label-1)  віджета `MrpInput` і встановіть для нього значення **`MRP($)`**.

![img](https://docs.appsmith.com/assets/images/as_storeTutorial_completeForm-5df011196bdda44e64c03f8c4798b3ad.png)

## Написання перевірок регулярних виразів

Тепер у вашій формі є всі необхідні віджети з налаштованими основними властивостями. Давайте додамо деякі перевірки регулярних виразів, щоб відхиляти недійсні введення від користувачів.

Почніть із **ProductNameInput**:

1. Відкрийте модаль його властивостей
2. Ми хочемо, щоб назва продукту містилася від 3 до 50 символів і містила лише літери англійського алфавіту (з пробілами). Для цього встановіть для властивості **Regex** значення `^\s*[a-zA-Z\s]{3,50}\s*$`.
3. Поле має забезпечувати зворотний зв’язок з користувачем, якщо його введення неправильне. Для цього встановіть **Error Message** на **Мають бути літери довжиною від 3 до 50**

Спробуйте заповнити як дійсні, так і недійсні значення в **ProductNameInput**, щоб побачити, як це поведеться!

![img](https://docs.appsmith.com/assets/images/as_storeTutorial_regexFail-0013608e6ac6d87e8c5040599ad601d3.png)

Тепер давайте налаштуємо **MrpInput** приймати лише десяткові значення, що перевищують або дорівнюють $1,00

1. Установіть для **Regex** значення `^\s*(?=.*[1-9])\d*(?:\.\d{1,2})?\s*$`
2. Установіть **Error Message** на **Значення має бути більше 0 і до 2 знаків після коми**

Переконайтеся, що регулярний вираз перевіряє введення належним чином і видає повідомлення про помилку в разі невідповідності.

## Надсилання форми

Ваша форма стала більш зручною для користувача та менш схильною до помилок! Давайте налаштуємо його на використання даних форми для додавання нового запису до нашого каталогу. Це включатиме два кроки:

1. **Налаштування запиту на вставку**, який додає новий продукт до таблиці.
2. Підключення кнопки Submit у формі, щоб **виконати запит на вставку.**

## Доступ до властивостей віджетів у запитах

Значення форми буде заповнено користувачем. Тепер давайте подивимося, як отримати доступ до даних нашої форми та підключити їх до нашого запиту INSERT! Майте на увазі, що **запити є сторінковими**, тобто якщо ви створите запит на сторінці 1, ви не зможете отримати доступ до цього запиту зі сторінки 2.

1) Перейдіть до **Pages → NewProductPage → Datasources  → +.**

2) Перейдіть до **Mock Database → New Query.**

3) Перейменуйте запит на **AddProductQuery.**

4) Скопіюйте наступне на вкладку Запит:

```sql
INSERT INTO products ("productName", "category", "mrp") VALUES ('{{ProductNameInput.text}}', '{{CategorySelect.selectedOptionValue}}', '{{MrpInput.text}}')
```

5) Запустіть запит.

6) Ви повинні побачити сповіщення про успішне виконання запиту!

Давайте коротко розглянемо: основний синтаксис запиту такий самий, як і у PostgreSQL, у такому форматі:

```sql
INSERT INTO table_name
 (col1, col2, col3, … colN)
VALUES
 (val1, val2, val3, … valN)
```

Єдина відмінність тут полягає в тому, що ви використовуєте **шаблон moustache** для написання JavaScript у запиті на вставку:

- Щоб отримати значення, надане користувачем у **ProductNameInput**, ви отримали доступ до його властивості `text`.
- Щоб отримати значення вибраного параметра **CategorySelect**, ви отримали доступ до його властивості `selectedOptionValue`.

Повторюємо: віджети, API та запити до БД, що належать до однієї батьківської сторінки, можуть отримувати доступ до властивостей і даних один одного, посилаючись на потрібну властивість у імені цього об’єкта.

З нашого запиту ми отримали доступ до властивостей наших віджетів! Щоб переглянути різноманітні доступні властивості для будь-якого віджета, перегляньте розділ **Internal Properties** в документації [widget](https://docs.appsmith.com/reference/widgets).

## Запуск дії щодо подій інтерфейсу користувача

Ваш запит **AddProductQuery** тепер налаштований на вставку динамічного введення користувача з форми. Давайте прив’яжемо кнопку Submit форми для виклику **AddProductQuery**:

1) Відкрийте властивості **SubmitButton**

2) Перейдіть до **Events → onClick**

3) Виберіть **Execute Query → AddProductQuery**

Спробуйте створити новий продукт за допомогою форми. Ви помітите, що після надсилання форми у вас немає способу визначити, чи було додано продукт чи ні. Нам потрібно налаштувати повідомлення про успіх або помилку:

1. Відкрийте властивості **SubmitButton.**
2. Перейдіть до **onClick → onSuccess.**
3. Виберіть **Show Message**
4. Введіть **Продукт створено успішно!**
5. Перейдіть до **onClick → onError.**
6. Виберіть **Show Message**
7. Введіть **Помилка створення продукту!**

![img](https://docs.appsmith.com/assets/images/as_storeTutorial_submitCallbacks-52c1869f5e67c5cc471377d25062145e.png)

Спробуйте надіслати форму ще раз. Тепер у вас має бути корисний відгук, щоб показати, чи запит спрацював належним чином!

## Налаштування дій за допомогою JavaScript

У попередньому розділі ви використовували графічний інтерфейс властивостей, щоб визначити події **onSuccess** і **onError** для кнопки **Submit**. Давайте розглянемо, як ви можете зробити те саме за допомогою JavaScript.

Натисніть піктограму **JS** поруч із **onClick**. Ви побачите, що довгий ієрархічний графічний інтерфейс, який представляє **onClick → onSuccess** і **onClick → onError,** перетворює код JavaScript, як показано нижче:

```javascript
{{
    AddProductQuery.run(
        () => showAlert('Product creation successful!'), 
        () => showAlert('Product creation failed!')
    )
}}
```

Вище ви бачите метод **`run()`**, визначений Appsmith. Ви можете викликати метод у будь-якому запиті до БД або API. Цей метод має такий підпис:

```javascript
run(onSuccess: function, onError: function, params: object): void
```

Натискання на **JS** активує дві речі:

1. Якщо поле порожнє, ви можете писати JavaScript. Тобто замість використання графічного інтерфейсу ви могли б самостійно написати цей JavaScript, щоб налаштувати події **onSuccess** і **onError**.
2. Якщо поле вже заповнено за допомогою графічного інтерфейсу користувача, воно перетворює налаштовану поведінку на код JavaScript. Ви можете змінити цей JavaScript для подальшого налаштування поведінки.

Зауважте, що ви пов’язали одну дію з подіями успіху та помилки. У [частині 3](https://docs.appsmith.com/learning-and-resources/tutorials/building-a-store-catalog-manager/creating-interactive-views) ви навчитеся зв’язувати кілька дії з кожною з подій.

Щоб дізнатися більше про написання JavaScript у Appsmith, перегляньте цей посібник [Написання JavaScript у Appsmith](https://docs.appsmith.com/learning-and-resources/how-to-guides/writing-javascript-in-appsmith ).

## Підключення кількох сторінок

Ви створили нову сторінку **NewProductPage** із формою, яка дозволяє користувачам додавати нові продукти до каталогу Oakry. Тепер ми хотіли б відкрити цю сторінку, коли користувач натискає кнопку **"Add new product"** на **ProductListPage**. Давайте налаштуємо це:

1. Перейдіть до **Pages** **→ ProductListPage**.
2. Перетягніть [віджет кнопки](https://docs.appsmith.com/reference/widgets/button) у нижній правий кут таблиці.
3. Перейменуйте нову кнопку на **AddProductButton**.
4. Змініть назву кнопки на **Add New Product**.
5. Перейдіть до **Events → onClick → Navigate To**.
6. Установіть для поля **Page Name** значення `NewProductPage`.

Ваша **ProductListPage** тепер виглядає так:

![img](https://docs.appsmith.com/assets/images/as_storeTutorial_navButton-253aaed25a90af269332150e6f34e46c.png)

Давайте перевіримо: натисніть кнопку «**Add New Product»** на **ProductListPage**. Ви побачите, що відкриється форма **NewProductPage**, готова для введення користувачем.

Вибравши опцію[Navigate To](https://docs.appsmith.com/reference/appsmith-framework/widget-actions/navigate-to), ви налаштовуєте кнопку, щоб відкривати нову сторінку, коли її натискаєте. Потім ви вказали назву цієї сторінки у своїй програмі, щоб Appsmith знав, куди перенаправити користувача.

# Створення інтерактивних переглядів

Наразі ви створили багатосторінковий інструмент, який дозволяє переглядати всі продукти та додавати нові продукти до каталогу. Наступний підручник допоможе вам створити функціональні можливості для редагування продукту. Під час цього ви навчитеся:

1. Доступ до стану одного віджета з іншого
2. Налаштування API для оновлення продукту
3. Виконання кілька дій з однією подією

## Доступ до властивостей між віджетами

Щоб розпочати впровадження функції «Редагувати продукт», давайте налаштуємо властивості таблиці, щоб додати кнопку **Edit** до кожного рядка. Після натискання кнопки **Edit** відкриється модальна форма, яка дозволяє редагувати деталі продукту у відповідному рядку таблиці.

1. Відкрийте властивості **ProductsTable**.
2. Клацніть **ADD A NEW COLUMN** у розділі **Columns**.
3. Натисніть піктограму ( ⚙️ ), щоб отримати доступ до налаштувань стовпця.
4. Змініть тип стовпця на **Button**. Ви можете перейменувати цей стовпець у вікні властивостей таблиці.
5. Позначте кнопку як **Edit** у властивостях кнопки в налаштуваннях стовпця.

Тепер **ProductsTable** має виглядати приблизно так:

![img](https://docs.appsmith.com/assets/images/as_storeTutorial_openModal-1c98005669623d2d1123aa687f6d9562.png)

Тепер у кожному рядку таблиці є кнопки, кожна з яких відповідає продукту цього рядка. Давайте налаштуємо ці кнопки, щоб відкривати режим редагування елементів:

1. Відкрийте властивості **ProductsTable**.
2. Перейдіть до налаштувань стовпця кнопок, клацнувши значок шестірні (⚙️) поруч із ним.
3. Виберіть дію **Open Modal** зі спадного списку **onClick**.
4. Виберіть **New Modal**.
5. Перейменуйте нову модаль на **EditProductModal** за допомогою її властивостей.
6. Перейменуйте модальний заголовок на **Edit Product**.
7. Видаліть дві кнопки за замовчуванням у нижній частині модалу, які називаються «Reset» та «Submit». Ви можете зробити це за допомогою значка кошика у верхній частині властивостей кожного віджета або вибравши віджети та натиснувши клавішу «Delete» на клавіатурі.
8. Перетягніть новий Form Widget в модальне вікно та видаліть стандартний текстовий віджет форми (оскільки модальний уже має наш заголовок).
9. Перейменуйте кнопку «Надіслати» у формі на **EditConfirmButton**.

Після цих кроків ваша нова модаль має виглядати так:

![img](https://docs.appsmith.com/assets/images/as_storeTutorial_formModal-ed4c4f1ceaa079e2608f6339f191846c.png)

Якщо модальне вікно закриється в будь-який момент, ви можете знову отримати до нього доступ у редакторі, подивившись на панель Провідника ліворуч від екрана, знайшовши його в дереві віджетів і клацнувши його назву, щоб відкрити його резервну копію.

Натисніть кнопку **Edit** будь-якого рядка, щоб переконатися, що **EditProductModal** відкривається належним чином. Після того, як це працює, давайте заповнимо форму віджетами! Вона повинна бути побудований таким чином, щоб:

- Виглядала так само, як **AddProductForm**
- Її властивості налаштовуються так само, як і властивості **AddProductForm**

Натисніть [тут](https://docs.appsmith.com/learning-and-resources/tutorials/building-a-store-catalog-manager/using-forms), якщо ви хочете повернутися до попередніх інструкцій для створення **AddProductForm**.

**Найменування:**

Назви віджетів у вашому **EditProductModal** такі самі, як імена віджетів у **AddProductForm**. Це вірно, оскільки вони обидва належать до різних батьківських сторінок. Імена мають бути унікальними лише в межах сторінки; віджет і API на одній батьківській сторінці не можуть використовувати однакову назву.

Як і **AddProductForm**, усі поля форми в **EditProductModal** порожні. Однак, щоб редагувати продукт, потрібно, щоб вони були попередньо заповнені значеннями продукту, який потрібно оновити. Це означає що:

- **ProductNameInput** має відображати значення **productName** ініційованого рядка.
- **MrpInput** має показувати значення **mrp** активованого рядка.
- **CategorySelect** має показувати значення **category** активованого рядка.

Давайте налаштуємо ці віджети!

Щоб установити значення за замовчуванням **ProductNameInput**:

1. Відкрийте властивості **ProductNameInput**.
2. Установіть **Default Text** на `{{ProductsTable.triggeredRow.productName}}`.
3. Переконайтеся, що **Evaluated Value** властивості відповідає відповідному значенню з активованого рядка.

Вище ви щойно написали JavaScript, щоб установити значення **Default Text**, використовуючи дані з `ProductsTable.triggeredRow`, який містить усі значення стовпців рядка, який ви хочете переглянути/виконати дію. Посилаючись на **`productName`** у ньому, ви отримуєте доступ до значення стовпця **productName**. Встановлюючи це значення для **Default Text**, ви попередньо заповнюєте форму цим значенням.

З форми ви отримуєте доступ до даних рядка таблиці через її властивість `triggeredRow`. Щоб переглянути доступні властивості будь-якого віджета, виберіть розділ **Properties** його запису в документації [**Widget** ](https://docs.appsmith.com/reference/widgets)

Насамкінець зауважте, що оскільки сфера дії віджета обмежена його батьківською сторінкою, віджет ділиться своїми властивостями лише з іншими віджетами, запитами та API, визначеними на тій же сторінці. Наприклад, у цьому випадку доступ до `ProductsTable.triggeredRow` можна отримати лише в інших віджетах, запитах і API **ProductListPage**. `ProductsTable.triggeredRow` не можна отримати доступ із жодного віджета, запиту чи API **AddProductPage**.

**Доступ до даних на сторінках:**

Є два способи отримати доступ до властивостей віджета або результатів запиту API/DB *з іншої сторінки*:

1. Зберігайте дані в кеші веб-переглядача за допомогою функції [storeValue](https://docs.appsmith.com/reference/appsmith-framework/widget-actions/store-value), щоб вони були доступні для доступу, навіть коли користувач переходить на іншу сторінку вашої програми.
2. Передайте дані як параметр запиту в URL-адресі сторінки, на яку ви перенаправляєте користувача. Це можна зробити за допомогою функції [navigateTo](https://docs.appsmith.com/reference/appsmith-framework/widget-actions/navigate-to).

Тепер установіть значення за замовчуванням для **MrpInput**:

1. Відкрийте властивості **MrpInput**.
2. Установіть **Default Text** на `{{ProductsTable.triggeredRow.mrp}}`.
3. Переконайтеся, що **Evaluated Value** властивості відповідає значенню поточного рядка.

І для CategorySelect:

1. Відкрийте властивості **CategorySelect**.
2. Установіть **Default Option** на `{{ProductsTable.triggeredRow.category}}`.
3. Переконайтеся, що **Evaluated Value** властивості відповідає значенню в активованому рядку.

Чудово, ваша форма має бути попередньо заповнена деталями вибраного продукту. Спробуйте, щоб переконатися, що все правильно заповнюється з вибраного рядка таблиці.

## Написання вашого першого API

Ваша форма редагування готова до введення користувачами. Далі вам потрібно буде налаштувати його кнопку «Confirm », щоб запускати оновлення продукту через API. Він складається з двох кроків:

1. Налаштування необхідного API.
2. Підключення кнопки надсилання форми для ініціювання запиту API.

У цьому розділі ви налаштуєте API.

Для оновлення продукту ви використовуватимете кінцеву точку нижче:

```http
PUT https://mock-api.appsmith.com/products/:id
```

Це макет API, представлений Appsmith, щоб допомогти вам вивчити основи API. Це не вимагає жодної автентифікації. Він приймає вхідні дані JSON і відповідає виводом JSON. Щоб налаштувати його у своїй програмі:

1. Перейдіть до **ProductListPage → Datasources**.
2. Натисніть **+ Create New**.
3. Виберіть **Create new API**.
4. Ви побачите інтерфейс, схожий на Postman.
5. Перейменуйте API на **UpdateProductApi**.
6. Встановіть метод запиту на **PUT**.
7. Скопіюйте та вставте наведене нижче в **URL** `https://mock-api.appsmith.com/products/{{ProductsTable.triggeredRow.id}}`.
8. Скопіюйте та вставте наведений нижче запит у розділ **Body**.
9. Запустіть API.

```json
{
    "productName" : "{{ProductNameInput.text}}",
    "mrp" : "{{MrpInput.text}}",
    "category" : "{{CategorySelect.selectedOptionValue}}"
}
```

![Click to enlarge!](https://docs.appsmith.com/assets/images/as_storeTutorial_updateProductApi-6f531bc09765c768b9811a052d5ec86b.png)

Використовуючи шаблон вусів у URL-адресі (крок 7), ви надаєте ідентифікатор продукту, який потрібно оновити. Щоб створити тіло запиту, ви пишете JavaScript у вусах, щоб надати нові значення для деталей продукту.

**Слово про спільний доступ до властивостей віджета:**

Тут ви отримуєте доступ до властивостей віджетів із запиту API. Це відповідає тому, що ви дізналися в попередніх розділах, - що ви можете отримати доступ до властивостей віджета з інших віджетів, API та запитів до БД. Незалежно від того, звідки ви отримуєте доступ до властивостей віджета, ви використовуєте той самий синтаксис імен для посилань на об’єкти. Таким чином, ви отримаєте доступ до значення через його`{{<widgetname>.<property_name>}}` незалежно від того, де ви знаходитесь у редакторі.

## Налаштування кількох дій щодо подій інтерфейсу

API для оновлення продукту готовий! У цьому розділі ви прив’яжете кнопку **Confirm** **EditProductModal** до запуску **UpdateProductApi**.

1. Відкрийте властивості **EditProductForm**.
2. Перейменуйте **label** на **Update**.
3. Перейдіть до **Events → onClick → Execute Query**.
4. Виберіть **UpdateProductApi**.
5. Перейдіть до `onSuccess`.
6. Виберіть **Execute Query → ProductsQuery**.
7. Перейдіть до `onError`.
8. Виберіть **Show Message**.
9. Установіть **Message** на **Product update failed!**.
10. Установіть **Type** на **Error**.

Давайте подивимося, що ви там зробили:

- Ви налаштували кнопку **Confirm** для запуску **UpdateProductApi**.
- Тепер ви хочете, щоб **ProductsTable** відображала оновлений список продуктів після успішного додавання нового продукту. Для цього ви встановлюєте подію `onSuccess` кнопки для виконання **ProductQuery**; якщо **UpdateProductApi** виконується успішно, **ProductQuery** буде виконано. Тут ви дотримуєтеся парадигми реактивного програмування Appsmith: ви запускаєте автоматичне оновлення даних, які відображає **ProductsTable**, викликаючи `ProductsQuery.run()`.
- Ви встановлюєте подію `onError` кнопки для показу попередження, щоб, якщо **UpdateProductApi** повертає помилку, відображалося попередження.

Спробуйте відредагувати продукт і натисніть **Confirm**, щоб переконатися, що він працює. Тепер у верхньому правому куті екрана мають відображатися сповіщення про успіх/помилку.

Через внутрішню конфігурацію фіктивної бази даних і API ви можете не побачити зміни в запиті PUT, відображені в таблиці. Однак якщо ваша програма повертає повідомлення про успішне виконання, не хвилюйтеся – ви зробили це правильно!

Наразі модальна форма завжди залишається відкритою після надсилання; давайте налаштуємо його на закриття форми, якщо оновлення буде успішним. У разі помилки ми залишимо форму відкритою для внесення подальших змін.

## Запуск кількох дій на подію інтерфейсу користувача

Щоб прив’язати кілька дій до події кнопки, вам доведеться написати деякий JavaScript:

1. Натисніть кнопку **JS** у полі **onClick** у властивостях **EditConfirmButton**.
2. Потім поле **onClick** перетворюється на JavaScript. Вставте наступне:

```javascript
{ {
  UpdateProductApi.run(
  () => { 
          ProductsQuery.run(); 
          closeModal('EditProductModal')
        },
  () => showAlert('Product update failed!'))
} }
```

Це схоже на те, що ви дізналися в [частині 2](https://docs.appsmith.com/learning-and-resources/tutorials/building-a-store-catalog-manager/using-forms) про використання JavaScript для визначення поведінка віджета. У частині 2 ви написали JavaScript, щоб ініціювати одну дію `onSuccess` **onClick**, але тут ви налаштовуєте *дві* дії. Першим аргументом методу run() є анонімна функція JavaScript, яка запускає дві дії у випадку onSuccess для **onClick**:

1. Виконує **ProductQuery.**
2. Закриває модаль.

Зауважте, що оскільки ці дії відбуваються асинхронно, усі вони виконуватимуться паралельно. Ви можете запускати скільки завгодно дій у `onSuccess` та `onError`, обернувши їх у анонімну функцію.

Спробуйте знову відредагувати продукт і переконайтеся, що надсилання форми працює належним чином.

**Графічний інтерфейс і JavaScript: що використовувати?**

Часто ви зможете точніше налаштувати поведінку програми, написавши JavaScript, ніж лише за допомогою графічного інтерфейсу.

Наприклад, налаштування кількох дій для виконання в `onSuccess` підтримується лише за допомогою JavaScript, оскільки для нього легше написати код, ніж налаштувати за допомогою графічного інтерфейсу користувача.

Подібним чином, щоб налаштувати умовну поведінку, написання потрійних умов у JavaScript легше та розширюваніше; тому графічний інтерфейс не передбачає цього.

Ми рекомендуємо вам витратити деякий час на роботу з JavaScript на Appsmith!

## Поділіться своєю програмою

Тепер розгорніть свою програму.

Після розгортання ви можете поділитися своїм розгорнутим додатком із внутрішніми та зовнішніми користувачами:

1. Натисніть кнопку **"Share"** у верхньому правому куті.
2. Поділіться URL-адресою програми з користувачем АБО
3. Запросіть користувача, додавши його електронну адресу, вибравши для нього відповідну роль і натиснувши **INVITE**.

Ви також можете зробити програму загальнодоступною, і в цьому випадку будь-хто, хто має URL-адресу програми, зможе переглядати її без необхідності входу. (Докладніше про  [access control](https://docs.appsmith.com/advanced-concepts/access-control))

**Що далі?**

Базова інформаційна панель каталогу тепер запущена та працює. Це також означає кінець підручника для початківців. На цьому етапі ви повинні знати достатньо, щоб почати власний проект і почати грати. Наступні ресурси стануть в нагоді, оскільки вам потрібно вивчити нові прийоми:

- [Core Concepts](https://docs.appsmith.com/core-concepts/connecting-to-data-sources)
- [Widgets](https://docs.appsmith.com/reference/widgets)
- [Appsmith Framework](https://docs.appsmith.com/reference/appsmith-framework)