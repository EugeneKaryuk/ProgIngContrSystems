# Git Hub actions

## [Про Git Hub actions](https://help.github.com/en/actions/getting-started-with-github-actions/about-github-actions)

Дії GitHub допоможуть вам автоматизувати робочі процеси з розробки програмного забезпечення в тому самому місці, де ви зберігаєте код та співпрацюєте над запитами на пул. Ви можете писати окремі завдання, що називаються діями (actions), і комбінувати їх для створення користувальницького робочого процесу (workflow). **Робочі процеси** (**workflow**) - це спеціалізовані автоматизовані процеси, які ви можете налаштувати у своєму сховищі для побудови, тестування, пакування, випуску чи розгортання будь-якого кодового проекту на GitHub.

За допомогою GitHub Actions ви можете будувати безперервну інтеграцію (CI) та можливості неперервного розгортання (CD) безпосередньо у вашому сховищі. Дії GitHub (GitHub Actions) надають повноцінну послугу безперервної інтеграції GitHub. Для отримання додаткової інформації див. "[About continuous integration](https://help.github.com/en/articles/about-continuous-integration)."

Робочі процеси працюють у Linux, macOS, Windows та контейнерах на машинах, розміщених на GitHub, названі **виконувачами** ('**runners**'). Крім того, ви також можете розмістити власних виконувачів для запуску робочих процесів на машинах, якими ви володієте або керуєте. Для отримання додаткової інформації див. "[About self-hosted runners](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/about-self-hosted-runners)."

Ви можете створювати робочі процеси, використовуючи дії, означені у вашому сховищі, дії з відкритим кодом у загальнодоступному сховищі на GitHub або опублікованим образом контейнера Docker. Робочі процеси у сховищах форк не працюють за замовчуванням.

Ви можете виявити дії, які потрібно використовувати у своєму робочому процесі на GitHub, та створити дії, які потрібно ділитися спільнотою з GitHub. Для отримання додаткової інформації про створення власної дії див  "[Creating actions](https://help.github.com/en/actions/creating-actions)."

## [Основні концепції](https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions)

### Action (Дія)

Індивідуальні завдання, які ви поєднуєте як кроки для створення роботи. Дії - це найменший портативний будівельний блок робочого процесу (workflow). Ви можете створювати власні дії, користуватися діями, спільними для спільноти GitHub, та налаштовувати публічні дії. Щоб використовувати дію в робочому процесі, потрібно включити її як крок.

### Artifact (Артефакт)

Артефакти - це файли, створені при побудові (build) та тестуванні коду. Наприклад, артефакти можуть включати бінарні файли або файли пакунків, результати тестів, скріншоти або файли журналів. Артефакти пов'язані з запуском робочого процесу, де вони були створені і можуть використовуватися іншим завданням або розгортатися.

### Continuous integration (CI)

Практика розробки програмного забезпечення часто здійснює невеликі зміни коду до спільного сховища. За допомогою GitHub Actions ви можете створювати власні робочі процеси CI, які автоматизують створення та тестування вашого коду. З вашого сховища ви можете переглянути стан змін вашого коду та докладні журнали для кожної дії у вашому робочому процесі. CI економить час розробників, надаючи негайний зворотній зв'язок щодо змін коду для швидшого виявлення та усунення помилок.

### Continuous deployment (CD)

Неперервне розгортання ґрунтується на неперервній інтеграції (CI). Коли новий код введено і проходить ваші тести на CI, код автоматично розгортається на виробництво. За допомогою GitHub Actions ви можете створювати власні робочі процеси CD, щоб автоматично розгортати ваш код у будь-яку хмару, сервіс, що розміщений на власній основі, або платформу зі свого сховища. CD економить час розробників за рахунок автоматизації процесу розгортання та розгортає перевірений, стабільний код швидше змінюється для ваших клієнтів.

### Event (Подія)

Конкретна діяльність, яка запускає запуск робочого процесу. Наприклад, активність може походити з GitHub, коли хтось натискає на коміт до сховища або коли створюється запит на пул чи issue. Ви також можете налаштувати робочий процес для запуску, коли відбувається зовнішня подія, використовуючи repository dispatch webhook.

### GitHub-hosted runner (виконувач GitHub)

GitHub розміщує виконувачі Linux, Windows та macOS. Роботи виконуються у новому екземплярі віртуальної машини, що включає загальновживане, попередньо встановлене програмне забезпечення. GitHub виконує всі оновлення та обслуговування виконувачів, розміщених на GitHub. Ви не можете налаштувати апаратну конфігурацію виконувачів, розміщених у GitHub. Для отримання додаткової інформації, див "[Virtual environments for GitHub-hosted runners](https://help.github.com/en/github/automating-your-workflow-with-github-actions/virtual-environments-for-github-hosted-runners)."

### Job (Завдання)

Набір кроків, які виконуються на одному виконувачі. Ви можете визначити правила залежності того, як виконуються завдання у файлі робочого процесу. Завдання можуть працювати паралельно або послідовно виконуватись залежно від стану попереднього завдання. Наприклад, робочий процес може мати два послідовних завдання, які будують і перевіряють код, де тестове завдання залежить від стану завдання збірки. Якщо завдання збірки не вдалося, тестове завдання не запуститься. Для виконувачів, що розміщуються в GitHub, кожне завдання в робочому процесі виконується в новому екземплярі віртуального середовища.

### Runner (Виконувач)

Будь-яка машина із встановленим застосунком виконувача GitHub Actions. Ви можете використовувати виконувач, який розміщується на GitHub, або розмістити власного виконувача. Виконувач чекає наявних завдань. Коли виконувач бере завдання, він виконує завдання та звітуж про прогрес, журнали та кінцеві результати назад до GitHub. Виконувачі виконують по одному завданню за раз. Докладніше див "[GitHub-hosted runner](https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#github-hosted-runner)" and "[Self-hosted runner](https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#self-hosted-runner)."

### Self-hosted runner

Машина, якою ви керуєте та підтримуєте, із встановленим застосунком виконувача. Самостійно розміщені виконувачі пропонують більше керування над апаратними, операційними системами та програмними засобами, ніж надають виконувачі, розміщені GitHub. За допомогою Self-hosted виконувачів ви можете створити конфігурацію обладнання на замовлення з більшою потужністю або процесором пам'яті для виконання великих завдань, встановити програмне забезпечення, доступне у вашій локальній мережі, та вибрати операційну систему, яку не пропонують виконувачі, розміщені GitHub. Для отримання додаткової інформації див. "[Hosting your own runners](https://help.github.com/en/github/automating-your-workflow-with-github-actions/hosting-your-own-runners)."

### Step (Крок)

Крок - це індивідуальна задача (task), яка може виконувати команди чи дії. Завдання конфігурує один або кілька кроків. Кожен крок у роботі виконується на одному і тому ж виконувачі, дозволяючи діям у цьому завданні обмінюватися інформацією за допомогою файлової системи.

### Virtual environment (Віртуальне середовище)

Віртуальне середовище виконувача, розміщеного у GitHub, включає конфігурацію апаратного забезпечення віртуальної машини, операційну систему та встановлене програмне забезпечення. Для отримання додаткової інформації див "[Virtual environments for GitHub-hosted runners](https://help.github.com/en/github/automating-your-workflow-with-github-actions/virtual-environments-for-github-hosted-runners)."

### Workflow (Робочий процес)

Налаштований автоматизований процес, який ви можете налаштувати у вашому сховищі для побудови, тестування, упаковки, випуску чи розгортання будь-якого проекту на GitHub. Робочі процеси складаються з одного або декількох завдань (jobs) і можуть бути заплановані або активовані подією.

### Workflow file (файл робочого процесу)

Файл YAML, який означує конфігурацію вашого робочого процесу щонайменше з одним завданням. Цей файл знаходиться в корені вашого сховища GitHub в каталозі `.github/workflows`.

### Workflow run (запуск робочого процесу)

Екземпляр вашого робочого процесу, який запускається, коли відбувається попередньо налаштована подія. Ви можете побачити завдання, дії, журнали та статуси для кожного запущеного робочого процесу.

## [Конфігурування та керування робочими процесами](https://help.github.com/en/actions/configuring-and-managing-workflows)

### [Конфігурування робочими процесами](https://help.github.com/en/actions/configuring-and-managing-workflows/configuring-a-workflow)

Ви можете створити більше одного робочого процесу в сховищі. Ви повинні зберігати робочі процеси в каталозі `.github/workflows`  у корені вашого сховища.

Робочі процеси повинні мати принаймні одне завдання (job), а завдання містять набір кроків (steps), які виконують окремі задачі (task). Кроки можуть запускати команди або використовувати дію (action). Ви можете створювати власні дії або використовувати дії, якими ділиться спільнота GitHub, та налаштовувати їх за потребою.

Ви можете налаштувати робочий процес для запуску, коли відбувається подія GitHub, за графіком або із зовнішньої події.

Вам потрібно налаштувати робочі процеси за допомогою синтаксису YAML та зберегти їх як файли робочого процесу у вашому сховищі. Після того, як ви успішно створили файл робочого процесу YAML та запустили робочий процес, ви побачите журнали збірки, результати тестів, артефакти та статуси для кожного кроку вашого робочого процесу. Для отримання додаткової інформації див. "[Managing a workflow run](https://help.github.com/en/articles/managing-a-workflow-run)."

 ![Annotated workflow run image](flwmedia/3.png)

Ви також можете отримувати сповіщення про оновлення стану робочого процесу. Для отримання додаткової інформації про параметри сповіщення див.  "[Configuring notifications](https://help.github.com/en/github/managing-subscriptions-and-notifications-on-github/configuring-notifications#github-actions-notification-options)."

### Створення файлу робочого процесу (workflow file)

На високому рівні це кроки для додавання файлу робочого процесу. Ви можете знайти конкретні приклади конфігурації в наступних розділах.

1. У корені вашого сховища створіть каталог із назвою `.github/workflows` для зберігання файлів робочого процесу.

2. У `.github/workflows` додайте файл ` .yml` або `.yaml` для вашого робочого процесу. Наприклад, `.github/workflows/continuous-integration-workflow.yml`.
3. Використовуйте довідникову документацію "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions)" для вибору подій для запуску дії, додавання дій та налаштувати робочий процес.
4. Запропонуйте зміни у файлі робочого процесу до гілки, де ви хочете працювати.

#### Приклад файлу робочого процесу 

```yaml
name: Greet Everyone
# Цей робочий процес запускається при завантженні (push) на сховище.
on: [push]

jobs:
  build:
    name: Greeting  # імя job
    runs-on: ubuntu-latest     # це завдання запускається на Linux
    steps:
      # Цей крок використовує hello-world-javascript-action з GitHub: https://github.com/actions/hello-world-javascript-action
      - name: Hello world
        uses: actions/hello-world-javascript-action@v1
        with:
          who-to-greet: 'Mona the Octocat'
        id: hello
      # Цей крок виводить на вихід (час) з попередньої дії кроку 
      - name: Echo the greeting's time
        run: echo 'The time was ${{ steps.hello.outputs.time }}.'
```

**Примітка:** Переконайтеся, що ви призначаєте лише валідні файли робочого процесу до вашого сховища. Якщо  `.github/workflows`  містить недійсний файл робочого процесу, дії GitHub генерують невдалий запуск робочого процесу для кожного нового коміту.

### Ініціювання робочого процесу через події 

Ви можете налаштувати робочий процес для запуску один раз:

- Подія на GitHub відбувається, наприклад, коли хтось робить пуш до сховища або коли створюється запит на пул чи ішью.
- Починається планова подія.
- відбувається зовнішня подія.

Щоб запустити робочий процес після того, як подія відбувається на GitHub, додайте `on:`  та значення події після імені робочого процесу. Наприклад, цей робочий процес спрацьовує, коли пушаться зміни до будь-якої гілки сховища.

```yaml
name: descriptive-workflow-name
on: push
```

Для планування робочого процесу можна використовувати синтаксис POSIX cron у вашому файлі робочого процесу. Найкоротший інтервал, з якого можна виконувати заплановані робочі процеси, - один раз на 5 хвилин. Наприклад, цей робочий процес спрацьовує щогодини.

```yaml
on:
  schedule:
    - cron:  '0 * * * *'
```

Щоб запустити робочий процес після того, як відбувається зовнішня подія, ви можете викликати подію webhook `repository_dispatch`, викликавши кінцеву точку REST API "Create a repository dispatch event". Для отримання додаткової інформації див. "[Create a repository dispatch event](https://developer.github.com/v3/repos/#create-a-repository-dispatch-event)"  в документації GitHub Developer.

Для отримання додаткової інформації та прикладів, див "[Events that trigger workflows](https://help.github.com/en/articles/events-that-trigger-workflows#webhook-events)."

### Фільтрація для вказаних гілок, тегів та шляхів 

Ви можете налаштувати робочий процес, щоб він працював лише на певних гілках. Наприклад, цей робочий процес запускається, коли пуш, що включає файли в каталозі `test`, робиться на гілці ` master`, або пушиться в тег `v1`.

```yaml
on:
  push:
    branches:
      - master
    tags:
      - v1
    # шляхи до файлу, які слід врахувати у події. Необов’язково; за замовчуванням для всіх.
    paths:
      - 'test/*'
```

Для отримання додаткової інформації про синтаксис фільтрів гілок, тегів та шляхів див "[`on..`](https://help.github.com/en/articles/workflow-syntax-for-github-actions#onpushpull_requestbranchestags)" та "[`on..paths`](https://help.github.com/en/articles/workflow-syntax-for-github-actions#onpushpull_requestpaths)."

### Вибір Виконувача (runner)

Ви можете запускати робочі процеси на виконувачах, розміщених на GitHub або виконувачах, що розміщуються самостійно. Завдання можуть працювати безпосередньо на машині або в контейнері Docker.

Ви можете вказати виконувач для кожного завдання в робочому процесі, використовуючи  `runs-on`. Для отримання додаткової інформації про `runs-on`, див "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#jobsjob_idruns-on)."

#### Використання виконувачів GitHub-hosted 

Ви можете вибрати різні типи та версії віртуальних хост-машин, включаючи Linux, Windows та macOS. Кожне завдання в робочому процесі виконується в новому екземплярі віртуального середовища, а кроки в межах завдання можуть обмінюватися інформацією за допомогою файлової системи. Для отримання додаткової інформації, див "[Virtual environments for GitHub Actions-hosted runners](https://help.github.com/en/articles/virtual-environments-for-github-actions)."

Наприклад, ви можете використовувати `ubuntu-latest`, щоб вказати останню версію виконувача, розміщеного на Ubuntu GitHub.

```yaml
runs-on: ubuntu-latest
```

#### Використання self-hosted виконувачів 

Ви можете використовувати мітки для маршрутизації завдань на конкретні типи виокнувачв. Усі виконувачі self-hosted отримують мітку `self-hosted`, і кожен виконувач self-hosted  має мітки для своєї операційної системи та архітектури системи. Для отримання додаткової інформації див "[Using self-hosted runners in a workflow](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/using-self-hosted-runners-in-a-workflow)."

Наприклад, якщо ви додали власний виконувач з операційною системою Linux та архітектурою ARM32, ви можете вибрати цього виконувача, використовуючи мітки  `self-hosted`, `linux`, та`ARM32`

```yaml
runs-on: [self-hosted, linux, ARM32]
```

### Конфігурування build matrix

Для тестування в декількох операційних системах, платформах та версій мов одночасно можна налаштувати матрицю збірки.

Матриця збірки дозволяє протестувати свій код за допомогою різного програмного забезпечення та конфігурацій операційної системи. Наприклад, робочий процес може виконувати завдання для більш ніж однієї підтримуваної версії мови, операційної системи чи інструменту. Для кожної конфігурації працює копія завдання та повідомляє про стан.

Ви можете вказати матрицю збірки у вашому файлі робочого процесу за допомогою масиву, у якому перераховані параметри конфігурації у розділі `Strategy:`. Наприклад, ця матриця збірки буде виконувати завдання з різними версіями Node.js та Ubuntu, операційної системи Linux.

Коли ви визначаєте матрицю операційних систем, ви повинні встановити значення `run-on` для контекстної властивості ` matrix.os`.

```yaml
runs-on: ${{ matrix.os }}
strategy:
  matrix:
    os: [ubuntu-16.04, ubuntu-18.04]
    node: [6, 8, 10]
```

Див "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#jobsjob_idstrategymatrix)."

### Використання дії checkout 

Є кілька стандартних дій, які ви можете використовувати у своєму робочому процесі. Дія **checkout** - це стандартна дія, яку потрібно включити у свій робочий процес перед іншими діями, коли:

- Для вашого робочого процесу потрібна копія коду вашого сховища, наприклад, коли ви створюєте і тестуєте своє сховище або використовуєте неперервну інтеграцію (CI).
- У вашому робочому процесі є хоча б одна дія, означена в одному сховищі. Для отримання додаткової інформації, див "[Referencing actions in your workflow](https://help.github.com/en/actions/configuring-and-managing-workflows/configuring-a-workflow#referencing-actions-in-your-workflow)."

Щоб використовувати стандартну дію checkout без додаткових специфікацій, включіть цей крок:

```yaml
- uses: actions/checkout@v2
```

Використання `v2` у цьому прикладі гарантує, що ви використовуєте стабільну версію дії з checkout . Для отримання додаткової інформації див [the checkout action](https://github.com/actions/checkout).

### Вибір типу дії для робочого процесу 

Існують різні типи дій, які ви можете використовувати у своєму робочому процесі відповідно до потреб вашого проекту:

- Дії контейнерів Docker
- дії JavaScript

Див "[About actions](https://help.github.com/en/articles/about-actions#types-of-actions)."

Вибираючи тип дій, який потрібно використовувати у вашому робочому процесі, радимо вивчити існуючі дії у загальнодоступних сховищах або на Docker hub та потенційно налаштувати ці дії для вашого проекту.

Ви можете переглядати та використовувати дії, створені GitHub в організації [github.com/actions](https://github.com/actions). Щоб відвідати Docker Hub, див. "[Docker Hub](https://www.docker.com/products/docker-hub)" на сайті Docker.

### Посилання на дії в workflow

Щоб посилатися на дії у вашому файлі робочого процесу з правильним синтаксисом, ви повинні врахувати, де означено дію.

Робочі процеси можуть використовувати дії, означені в:

- Публічному сховищі
- Тому самому сховищі, де файл вашого робочого процесу посилається на дії
- Опублікований образ контейнера Docker на Docker Hub

Для використання дії, означеної в приватному сховищі, і файл робочого процесу, і дія повинні бути в одному сховищі. Ваш робочий процес не може використовувати дії, означені в інших приватних сховищах, навіть якщо інше приватне сховище знаходиться в одній організації.

Щоб зберегти робочий процес стабільним, навіть коли проводиться оновлення дії, ви можете посилатися на версію дії, яку ви використовуєте, вказавши номер файлу Git ref чи Docker у файлі робочого процесу. Приклади див "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#jobsjob_idstepsuses)."

Див також "[Workflow syntax for GitHub Actions](https://help.github.com/en/github/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions)."

#### Посилання на дію в публічному репозиторії 

Для цього треба використовувати синтаксис `{owner}/{repo}@{ref}` або `{owner}/{repo}/{path}@{ref}`.

```yaml
jobs:
  my_first_job:
    name: My Job Name
      steps:
        - uses: actions/setup-node@v1
          with:
            node-version: 10.x
```

Щоб побачити повний приклад робочого процесу, див репозиторій шаблону [setup node](https://github.com/actions/setup-node) .

#### Посилання на дію в тому ж репозиторію де є workflow file що виокристовує дію 

Якщо дія визначена в тому самому сховищі, де ваш файл робочого процесу використовує дію, ви можете в файлі робочого процесу посилатися на дію або з синтаксисом ‌`{owner}/{repo}@{ref}` або `./path/to/dir` .

Приклад файлової структури репозиторію:

```gherkin
|-- hello-world (repository)
|   |__ .github
|       └── workflows
|           └── my-first-workflow.yml
|       └── actions
|           |__ hello-world-action
|               └── action.yml
```

Приклад workflow file:

```yaml
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      # This step checks out a copy of your repository.
      - uses: actions/checkout@v2
      # This step references the directory that contains the action.
      - uses: ./.github/actions/hello-world-action
```

#### Посилання на контейнер на Docker Hub

Якщо дія означена в опублікованому образі контейнера Docker на Docker Hub, ви повинні посилатися на дію з наступним синтаксисом `docker://{image}:{tag}` .  Щоб захистити свій код та дані, ми наполегливо рекомендуємо перевірити цілісність образу контейнера Docker від Docker Hub, перш ніж використовувати його у своєму робочому процесі.

```yaml
jobs:
  my_first_job:
    steps:
      - name: My first step
        uses: docker://alpine:3.8
```

Деякі приклади Docker actions, див [Docker-image.yml workflow](https://github.com/actions/starter-workflows/blob/master/ci/docker-image.yml) та "[Creating a Docker container action](https://help.github.com/en/articles/creating-a-docker-container-action)."

Див також "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#jobsjob_idstepsuses)."

### Додавання знаку статусу workflow до вашого репозиторію

Значки стану показують, чи поточний процес в даний час не працює або проходить. Загальне місце для додавання значка статусу - у файлі README.md вашого сховища, але ви можете додати його на будь-яку веб-сторінку, яку ви хочете. За замовчуванням значки відображають статус вашої гілки за замовчуванням (як правило, `master`). Ви також можете відобразити стан запуску робочого процесу для певної гілки чи події, використовуючи параметри запиту `branch`  та `event`  в URL-адресі.

![img](https://help.github.com/assets/images/help/repository/actions-workflow-status-badge.png)

Якщо у вашому робочому процесі використовується ключове слово `name` , вам слід посилатися на робочий процес за назвою. Якщо назва вашого робочого процесу містить пробіл, вам потрібно буде замінити пробіл кодованою URL-адресою рядка `% 20`. Більше інформації про ключове слово `name` див "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#name)."

```vim
https://github.com/<OWNER>/<REPOSITORY>/workflows/<WORKFLOW_NAME>/badge.svg
```

Крім того, якщо у вашому робочому процесі немає `name`,   Ви повинні посилатися на файл робочого процесу за допомогою шляху файлу щодо кореневого каталогу сховища.

**Примітка.** Посилання на файл робочого процесу за допомогою шляху файлу не працює, якщо робочий процес має `name`

```vim
https://github.com/<OWNER>/<REPOSITORY>/workflows/<WORKFLOW_FILE_PATH>/badge.svg
```

#### Приклад використання workflow name

This Markdown example adds a status badge for a workflow with the name "Greet Everyone." The `OWNER` of the repository is the `actions` organization and the `REPOSITORY` name is `hello-world`.

Цей приклад Markdown додає значок статусу для робочого процесу з назвою "Greet Everyone". `OWNER`  сховища - це організація `actions` , а назва `REPOSITORY`  -  `hello-world`..

```crystal
![](https://github.com/actions/hello-world/workflows/Greet%20Everyone/badge.svg)
```

#### Приклад використання шляху workflow file 

Цей приклад розміщення додає значок статусу для робочого процесу за допомогою файлу `.github/workflows/main.yml`. `OWNER`  сховища - це організація `actions` , а назва `REPOSITORY`  -  `hello-world`.

```crystal
![](https://github.com/actions/hello-world/workflows/.github/workflows/main.yml/badge.svg)
```

#### Приклад використання параметру `branch` 

Цей приклад розміщення додає значок статусу для гілки з назвою `feature-1`.

```crystal
![](https://github.com/actions/hello-world/workflows/Greet%20Everyone/badge.svg?branch=feature-1)
```

#### Приклад використання параметру `event` 

Цей приклад розміщення додає значок, який відображає стан запуску робочого процесу, ініційований подією `pull_request`.

```crystal
![](https://github.com/actions/hello-world/workflows/Greet%20Everyone/badge.svg?event=pull_request)
```

## [Створення та збереження шифрованих паролів](https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets) 



## [Використання змінних середовища](https://help.github.com/en/actions/configuring-and-managing-workflows/using-environment-variables)

GitHub встановлює змінні середовища за замовчуванням для кожного запущеного робочого процесу GitHub Actions. Ви також можете встановити власні змінні середовища у файлі робочого процесу.

### Про змінні середовища 

GitHub встановлює змінні середовища за замовчуванням, які доступні для кожного кроку в робочому процесі. Змінні середовища залежать від регістру. Команди, що виконуються в діях або кроках, можуть створювати, читати та змінювати змінні середовища.

Щоб встановити власні змінні середовища, потрібно вказати змінні у файлі робочого процесу. Ви можете означити змінні середовища для кроку, завдання або всього робочого процесу за допомогою  ключових слів  [`jobs..steps.env`](https://help.github.com/en/github/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#jobsjob_idstepsenv), [`jobs..env`](https://help.github.com/en/github/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#jobsjob_idenv), та [`env`](https://help.github.com/en/github/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#env) . Див. "[Workflow syntax for GitHub](https://help.github.com/en/articles/workflow-syntax-for-github-actions/#jobsjob_idstepsenv)."

```yaml
steps:
  - name: Hello world
    run: echo Hello world $FIRST_NAME $middle_name $Last_Name!
    env:
      FIRST_NAME: Mona
      middle_name: The
      Last_Name: Octocat
```

Ви також можете скористатися командою `set-env` робочого процесу для встановлення змінної середовища, яку можуть використовувати наступні кроки в робочому процесі. Команда `set-env` може використовуватися безпосередньо дією або як команда shell у файлі робочого процесу за допомогою ключового слова `run` . Див. "[Workflow commands for GitHub Actions](https://help.github.com/en/actions/reference/workflow-commands-for-github-actions/#setting-an-environment-variable)."

### Змінні середовища за замовченням 

Ми настійно рекомендуємо діям використовувати змінні середовища для доступу до файлової системи, а не використовувати прямі шляхи до файлів. GitHub встановлює змінні середовища для дій, які потрібно використовувати у всіх середовищах виконувача.

| Змінна середовища   | Опис                                                         |
| ------------------- | ------------------------------------------------------------ |
| `CI`                | Завжди встановлено в `true`.                                 |
| `HOME`              | Шлях до домашньої директорії GitHub використовується для збереження користувацьких даних. Наприклад, `/github/home`. |
| `GITHUB_WORKFLOW`   | Ім'я workflow.                                               |
| `GITHUB_RUN_ID`     | Унікальний номер для кожного запуску в сховищі. Це число не змінюється, якщо ви повторно запустите робочий процес. |
| `GITHUB_RUN_NUMBER` | Унікальний номер для кожного запуску певного робочого процесу в сховищі. Це число починається з 1 для першого запуску робочого процесу та збільшується з кожним новим виконанням. Це число не змінюється, якщо ви повторно запустите робочий процес. |
| `GITHUB_ACTION`     | Унікальний ідентифікатор дії (`id`).                         |
| `GITHUB_ACTIONS`    | Завжди встановлене в значення `true`, коли GitHub Actions виконує робочий процес. Ви можете використовувати цю змінну для розмежування, коли тести виконуються локально або за допомогою GitHub Actions. |
| `GITHUB_ACTOR`      | Ім’я особи чи програми, яка ініціювала робочий процес. Наприклад, `octocat`. |
| `GITHUB_REPOSITORY` | Назва власника та сховища. Наприклад, `octocat/Hello-World`. |
| `GITHUB_EVENT_NAME` | Назва події webhook, яка спровокувала робочий процес.        |
| `GITHUB_EVENT_PATH` | Шлях до файлу з повним навантаженням події в webhook. Наприклад, `/github/workflow/event.json`. |
| `GITHUB_WORKSPACE`  | Шлях до каталогу робочого середовища GitHub. Каталог робочого середовища містить підкаталог із копією вашого сховища, якщо ваш робочий процес використовує дію [actions/checkout](https://github.com/actions/checkout). Якщо ви не використовуєте дію `actions/checkout`, каталог буде порожнім. Наприклад, `/home/runner/work/my-repo-name/my-repo-name`. |
| `GITHUB_SHA`        | SHA коміта, який ініціює workflow. Наприклад, `ffac537e6cbbf934b08745a378932722df287a53`. |
| `GITHUB_REF`        | Посилання на гілку чи тег, що ініціював робочий процес. Наприклад,  `refs/heads/feature-branch-1`. Якщо для типу події не доступна ні гілка, ні тег, змінна не буде існувати. |
| `GITHUB_HEAD_REF`   | Встановлюється лише для сховищ-форків. Відділення базового сховища. |
| `GITHUB_BASE_REF`   | Встановлюється лише для сховищ-форків. Гілка базового схоивща. |

### Правила найменування змінних середовища 

**Примітка:** GitHub зберігає префікс змінної середовища `GITHUB_`  для внутрішнього використання GitHub. Якщо встановити змінну середовища або пароль із префіксом `GITHUB_`, це призведе до помилки.

Будь-які нові змінні середовища, які ви встановили, що вказують на місце у файловій системі, повинні мати суфікс `_PATH` . Змінні за замовчуванням `HOME` та ` GITHUB_WORKSPACE` є винятками з цієї конвенції, оскільки слова "home" та "workpace" вже передбачають розташування.

## [Автентифікація з GITHUB_TOKEN](https://help.github.com/en/actions/configuring-and-managing-workflows/authenticating-with-the-github_token)



## [Зберігання даних робочого процесу за допомогою артефактів ](https://help.github.com/en/actions/configuring-and-managing-workflows/persisting-workflow-data-using-artifacts)

Артефакти дозволяють обмінюватися даними між завданнями в робочому процесі та зберігати дані після завершення робочого процесу.

### Про артефакти робочих процесів 

Артефакти дозволяють зберігати дані після завершення завдання та ділитися цими даними з іншим завданням у тому ж робочому процесі. Артефакт - це файл або колекція файлів, що утворюються під час виконання робочого процесу. Наприклад, ви можете використовувати артефакти, щоб зберегти свої збірки та випробування після закінчення запуску робочого процесу. GitHub для артефактів зберігає артефакти протягом 90 днів. Період збереження для запиту на пул перезапускається кожного разу, коли хтось робить новий запит на пул. 

Ось деякі поширені артефакти, які ви можете завантажити:

- Журнали файлів та основні дампів
- Результати тестів, збої та скріншоти
- Двійкові або стислі файли
- Вихід результатів тестів випробувань та результати покриття коду

Зберігання артефактів використовує місця для зберігання на GitHub. Використання GitHub Action є безкоштовним для загальнодоступних сховищ. Для приватних сховищ кожен обліковий запис GitHub отримує певну кількість безкоштовних хвилин та місця зберігання, залежно від продукту, який використовується з обліковим записом. Для отримання додаткової інформації, див. "[Managing billing for GitHub Actions](https://help.github.com/en/github/setting-up-and-managing-billing-and-payments-on-github/managing-billing-for-github-actions)."

Артефакти завантажуються під час виконання робочого процесу, і ви можете переглянути ім'я та розмір артефакту в інтерфейсі користувача. Коли артефакт завантажується за допомогою інтерфейсу GitHub, всі файли, які були окремо завантажені як частина артефакту, стискаються в один файл. Це означає, що рахунки розраховуються виходячи з розміру завантаженого артефакту, а не розміру zip-файлу.

GitHub надає дві дії, які можна використовувати для завантаження та вивантаження артефактів. Для отримання додаткової інформації, див. [actions/upload-artifact](https://github.com/actions/upload-artifact) та [download-artifact](https://github.com/actions/download-artifact) actions.

Для виконувачів, що розміщуються в GitHub, кожне завдання в робочому процесі виконується в новому екземплярі віртуального середоивща. Коли завдання завершено, виконувач припиняє і видаляє екземпляр віртуальної середовища.

Для обміну даними між задваннями:

- **Вивантаження (Uploading) файлів**: Дайте ім'я вивантажуваному файлу та вивантажте дані до завершення завдання.
- **Завантаження (Downloading) файлів**: Ви можете завантажувати лише артефакти, які були вивантажені під час того ж робочого процесу. Завантажуючи файл, ви можете посилатися на нього по імені.

Етапи роботи поділяють одне і те ж середовище на машині виконувача, але виконуються у власних індивідуальних процесах. Для передачі даних між кроками в завданні можна використовувати входи та виходи. Для отримання додаткової інформації про входи та виходи див. "[Metadata syntax for GitHub Actions](https://help.github.com/en/articles/metadata-syntax-for-github-actions)."

### Передача даних між завданнями у workflow

Ви можете використовувати дії  `upload-artifact` та  `download-artifact` для обміну даними між завданнями в робочому процесі. Цей приклад робочого процесу ілюструє, як передавати дані між завданнями в одному і тому ж робочому процесі. Для отримання додаткової інформації див  [actions/upload-artifact](https://github.com/actions/upload-artifact) та [download-artifact](https://github.com/actions/download-artifact) actions.

Завдання, які залежать від артефактів попереднього завдання, повинні чекати успішного виконання залежного завдання. Цей робочий процес використовує ключове слово `needs`, щоб забезпечити послідовне виконання  `job_1`, `job_2`, та `job_3` . Наприклад, для `job_2` потрібує ` job_1`, використовуючи синтаксис `needs: job_1`.

Job 1 виконує наступні дії:

- Виконує математичний обчислення та зберігає результат у текстовому файлі під назвою `math-homework.txt`.
- Використовує дію  `upload-artifact` для вивантаження файлу `math-homework.txt` з назвою `homework`. Дія розміщує файл у каталозі під назвою`homework`

Job 2 використовує результат у попередній роботі:

- Завантажує артефакт `homework` , вивантажений у попередньому завданні. За замовчуванням дія `download-artifact` завантажує артефакти в каталог робочої області, в якому виконується крок. Ви можете використовувати вхідний параметр ` path`, щоб вказати інший каталог завантажень.
- читає значення з файлу  `homework/math-homework.txt`, виконує математичний обчислення та зберігає результат у ` math-homework.txt`.
- Вивантажує файл `math-homework.txt`. Це вивантаження перезаписує попереднє вивантаження, оскільки обидва вивантаження мають одне ім’я.

Job 3 відображає результат, вивантажений у попередньому завданні:

- Завантажує артефакт  `homework`.
- Друкує результат журналу математичного рівняння.

Повна математична операція, виконана в цьому прикладі робочого процесу, є `(3 + 7) x 9 = 90`.

```yaml
name: Share data between jobs

on: [push]

jobs:
  job_1:
    name: Add 3 and 7
    runs-on: ubuntu-latest
    steps:
      - shell: bash
        run: |
          expr 3 + 7 > math-homework.txt
      - name: Upload math result for job 1
        uses: actions/upload-artifact@v1
        with:
          name: homework
          path: math-homework.txt

  job_2:
    name: Multiply by 9
    needs: job_1
    runs-on: windows-latest
    steps:
      - name: Download math result for job 1
        uses: actions/download-artifact@v1
        with:
          name: homework
      - shell: bash
        run: |
          value=`cat homework/math-homework.txt`
          expr $value \* 9 > homework/math-homework.txt
      - name: Upload math result for job 2
        uses: actions/upload-artifact@v1
        with:
          name: homework
          path: homework/math-homework.txt

  job_3:
    name: Display results
    needs: job_2
    runs-on: macOS-latest
    steps:
      - name: Download math result for job 2
        uses: actions/download-artifact@v1
        with:
          name: homework
      - name: Print the final result
        shell: bash
        run: |
          value=`cat homework/math-homework.txt`
          echo The result is $value
```

![Workflow that passes data between jobs to perform math](flwmedia/4.png)

### Розшарення даних між виконаннями робочих процесів

Після завершення робочого процесу ви можете завантажити стислий файл вивантажених артефактів на GitHub, знайшовши робочий процес на вкладці **Actions** . Також ви можете використовувати API GITHub REST для завантаження артефактів. Для отримання додаткової інформації див. "[Artifacts](https://developer.github.com/v3/actions/artifacts/)"  в документації на GitHub Developer.

Якщо вам потрібно отримати доступ до артефактів із попереднього запуску робочого процесу, вам потрібно буде десь зберігати артефакти. Наприклад, ви можете запустити сценарій в кінці робочого процесу для зберігання збірок артефактів на Amazon S3 або Artifactory, а потім скористатися API служби зберігання для отримання цих артефактів у майбутньому робочому процесі.

### Вивантаження збірок та тестування артефактів 

Ви можете створити робочий процес безперервної інтеграції (CI) для збірки та тестування коду. Для отримання додаткової інформації про використання дій GitHub для виконання CI, див. [About continuous integration](https://help.github.com/en/articles/about-continuous-integration).

Результати збірки та тестування вашого коду часто створюють файли, які ви можете використовувати для налагодження відмов тесту та виробничого коду, який ви можете розгорнути. Ви можете налаштувати робочий процес для складання та тестування коду, що надсилається до вашого сховища, та повідомляти про стан успіху чи відмови. Ви можете завантажувати збірку та тестові результати для використання для розгортання, налагодження помилкових тестів або збоїв та перегляду покриття тестового набору.

Для завантаження артефактів можна використовувати дію `upload-artefact`. Для отримання додаткової інформації дивіться дію  [actions/upload-artifact](https://github.com/actions/upload-artifact) 

#### Приклад 

Наприклад, ваше сховище або веб-застосунок можуть містити файли SASS і TypeScript, які потрібно перетворити на CSS та JavaScript. Якщо припустити, що ваша конфігурація збірки виводить скомпільовані файли в каталог `dist` , ви будете розгортати файли в каталозі `dist` на вашому сервері веб-застосунків, якщо всі тести успішно виконані.

```1c
|-- hello-world (repository)
|   └── dist
|   └── tests
|   └── src
|       └── sass/app.scss
|       └── app.ts
|   └── output
|       └── test
|   
```

Цей приклад показує вам, як створити робочий процес для проекту Node.js, який `builds`  код у каталозі ` src` та запускає тести в каталозі `tests` . Можна припустити, що запуск `npm test` створює звіт про покриття коду під назвою ` code-pokri.html`, що зберігається в каталозі `output/test/`.

The workflow uploads the production artifacts in the `dist` directory and the `code-coverage.html` as two separate artifacts.

Робочий процес завантажує виробничі артефакти в каталог `dist` і `code-pokri.html` у вигляді двох окремих артефактів.

```yaml
name: Node CI

on: [push]

jobs:
  build_and_test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
      - name: npm install, build, and test
        run: |
          npm install
          npm run build --if-present
          npm test
      - name: Archive production artifacts
        uses: actions/upload-artifact@v1
        with:
          name: dist
          path: dist
      - name: Archive code coverage results
        uses: actions/upload-artifact@v1
        with:
          name: code-coverage-report
          path: output/test/code-coverage.html
```

![Image of workflow upload artifact workflow run](flwmedia/5.png)

### Завантаження і видалення артефактів

Ви можете завантажити артефакти, які були вивантажені під час робочого процесу. Артефакти автоматично закінчуються через 90 днів, однак ви завжди можете повернути використані сховища в GitHub Actions, видаливши артефакти, перш ніж вони закінчуються на GitHub.

**Warning:** Once you delete an artifact, it can not be restored.

1. On GitHub, navigate to the main page of the repository.

2. Under your repository name, click 

   Actions

**Попередження:** Щойно ви видалите артефакт, його неможливо відновити.

1. На GitHub перейдіть на головну сторінку сховища.
2. Під іменем вашого сховища натисніть **Actions**


![Actions tab in the main repository navigation](flwmedia/6.png)

3. На лівій бічній панелі натисніть робочий процес, який ви хочете бачити.

![Workflow list in left sidebar](flwmedia/7.png)

4. У розділі "Запуск робочого процесу" натисніть назву запуску, який ви хочете побачити.

![Name of workflow run](flwmedia/8.png)

5. Для завантаження артефактів використовуйте спадне меню **Artifacts**, і виберіть артефакт, який ви хочете завантажити.

![Download artifact drop-down menu](flwmedia/9.png)

6. Для видалення артефактів, використовуйте спадне меню **Artifacts** та натисніть на корзинку 

![Delete artifact drop-down menu](flwmedia/10.png)



https://github.com/sdras/awesome-actions